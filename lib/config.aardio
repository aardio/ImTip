//config é…ç½®æ–‡ä»¶
import fsys.config;

config = fsys.config( "/.ImTip/", io.appData("/aardio/std/ImTip/") ); 

namespace config {

	__defaultSchemes = {
		[1] = {
			argbColor=-1;
			border={color=14395508;radius=6;width=0};
			offsetX=31;
			iconStyle={align="right";font={h=-14;name="imtip";weight=700};padding={top=4;right=6;left=0;bottom=0}};
			background=-151026827;
			textRenderingHint=3;
			openStyle={[1]={argbColor=-1;background=-151026827;border={color=14395508;radius=6;width=0};iconColor=-1};[0]={argbColor=-1;background=-1136150017;border={color=14395508;radius=6;width=0};iconColor=-1}};
			timeout=2;
			align="left";
			textPadding={top=0;right=0;left=4;bottom=0};
			tipChars={fullShape='\uF111';close='\uF05E';hanja="æ¼¢";[1033]="En";[2052]="ä¸­";[1041]="ã‚";katakana="ã‚«";halfShape='\uF186';[1042]="ê°€";capital='\uF031';symbol="ã€‚"};
			width=55;
			font={h=-18;name="Segoe UI";weight=700};
			interval=50;
			iconColor=-1;
			height=34;
			offsetY=2;
			iconTextRenderingHint=3;
			valign="center"
		};
		[2] = {
			argbColor=-1836295;
			border={color=-1261241864;radius=18;width=2};
			offsetX=23;
			iconStyle={font={h=-12;name="imtip";weight=400};align="right";padding={top=3;right=6;left=0;bottom=0};valign="center"};
			background=-16562265;
			textRenderingHint=5;
			openStyle={[1]={argbColor=-1836295;background=-16562265;border={color=-1261241864;radius=18;width=2};iconColor=-4194379};[0]={argbColor=-1771533;background=-16476777;border={color=-8143936;radius=18;width=2};iconColor=-2490625}};
			align="left";
			textPadding={top=7;right=0;left=7;bottom=7};
			tipChars={fullShape='\uF111';close='\uE801';[1033]="è‹±";[2052]="ä¸­";symbol='\uF82B';en="è‹±";capital='\uF031';lang="ä¸­";halfShape='\uF042'};
			width=49;
			font={h=-14;name="Segoe UI";weight=400};
			iconColor=-4194379;
			height=29;
			offsetY=-5;
			iconTextRenderingHint=4;
			valign="center"
		};
		[3] = {
			argbColor=-1;
			border={color=-7810305;radius=29;width=1};
			offsetX=27;
			paddingBottom=14;
			iconStyle={align="right";font={h=-14;name="imtip";weight=700};padding={top=-2;right=5;left=0;bottom=-26}};
			background=-134163201;
			textRenderingHint=3;
			openStyle={[1]={argbColor=-1;foreground=-286406415;background=-134163201;border={color=-7810305;radius=29;width=1};iconColor=-1};[0]={argbColor=-1;foreground=-16539905;background=-12058775;border={color=14395508;radius=29;width=1};iconColor=-1}};
			linearGradient=265;
			paddingTop=3;
			align="left";
			valign="center";
			tipChars={fullShape='\uF111';close='\uF05E';symbol="ã€‚";[1033]="En";[2052]="ä¸­";[1041]="ã‚";capital='\uF031';halfShape='\uF186';[1042]="ê°€";katakana="ã‚«";hanja="æ¼¢"};
			width=36;
			font={h=-17;name="Segoe UI";weight=700};
			iconColor=-1;
			foreground=-286406415;
			height=43;
			offsetY=4;
			iconTextRenderingHint=3;
			textPadding={top=0;right=0;left=2;bottom=0}
		};
		[4] = { 
			argbColor=16731983;
			border={color=14395508;radius=6;width=0};
			offsetX=13;
			iconStyle={align="left";font={h=-17;name="imtip";weight=700};padding={top=4;right=6;left=1;bottom=0}};
			background=16745333;
			textRenderingHint=3;
			openStyle={[1]={argbColor=16731983;background=16745333;border={color=14395508;radius=6;width=0};iconColor=-45233};[0]={argbColor=5291856;background=4700671;border={color=14395508;radius=6;width=0};iconColor=-11485360}};
			align="left";
			textPadding={top=0;right=0;left=-60;bottom=0};
			tipChars={fullShape='\uF111';close='\uE801';hanja="æ¼¢";[1033]='\uF111';[2052]='\uF111';[1041]="ã‚";katakana="ã‚«";halfShape='\uF042';[1042]="ê°€";capital='\uF031';symbol='\uF111'};
			width=55;
			font={h=-18;name="imtip";weight=400};
			iconColor=-45233;
			foreground=16745333;
			height=34;
			offsetY=3;
			iconTextRenderingHint=3;
			valign="center" 
		};
		[5] = {
			argbColor=-1;
			border={color=-10454122;radius=10;width=0};
			offsetX=37;
			iconStyle={align="right";font={h=-14;name="imtip";weight=700};padding={top=-6;right=0;left=-21;bottom=-10}};
			background=-11639686;
			textRenderingHint=3;
			openStyle={[1]={argbColor=-1;foreground=-3373177;background=-11639686;border={color=-10454122;radius=10;width=0};iconColor=-1};[0]={argbColor=-6144;foreground=-10561920;background=-11700124;border={color=14395508;radius=10;width=0};iconColor=-1854}};
			paddingBottom=21;
			align="left";
			valign="center";
			tipChars={fullShape='\uF111';close='\uF05E';symbol="ã€‚";[1033]="En";[2052]="ä¸­";[1041]="ã‚";capital='\uF031';halfShape='\uF186';[1042]="ê°€";katakana="ã‚«";hanja="æ¼¢"};
			width=48;
			font={h=-21;name="Segoe UI";weight=700};
			iconColor=-1;
			foreground=-3373177;
			height=36;
			offsetY=2;
			iconTextRenderingHint=3;
			textPadding={top=-5;right=-41;left=3;bottom=-23}
		}; 
	}
	
	__defaultScheme = function(){
		var idx = setting.schemeIndex : 1;
		return ..table.clone(__defaultSchemes[idx] || __defaultSchemes[1]);
	}
}

if(!config.style.width){
	config.style.mix( ..config.__defaultScheme() );	
}

if(!config.setting.schemes) {
	config.setting.schemes = table.clone(config.__defaultSchemes)
}

if(!config.setting.editorClasses){
	config.setting.interval = 50;
	config.setting.timeout = 2;
	config.setting.editorClasses = {
		["AVL_AVView"]=1;["ConsoleWindowClass"]=1
	};	
}

..table.assign(config.setting.editorClasses,{
	["@WeChatMainWndForPC"]=1;
	["@ChatWnd"]=1;
	["#EXCEL6"]=1;
});

config.style.backgroundColor = null;
config.style.timeout = null;

config.setting.updateQuirksMode = function(quirksMode){
	if(quirksMode===null){
		quirksMode = config.setting.quirksMode;
	}
	
	if(quirksMode){
		import ..sys.input;
		var tips = ..sys.input.getEnabledLayoutOrTips();
		
		if(tips["0804:{86598FB9-66A2-463E-B9C2-AEB906D477AD}{607FDF85-FCC8-4DBD-A365-41296F980C9C}"]){
			quirksMode = 3;//WX
		}
		elseif(tips["0804:{B722B5D7-0C4C-4933-A7B9-DF8C91F2C643}{0C7479AF-F27F-488C-A46B-5BDA6BF43E50}"] ){
			quirksMode = 2;//XF
		}
		elseif(tips["0804:{6573078D-A793-4CD9-A6E6-0FFB01F35262}{CE7B668C-8260-4496-AEE0-5305D3FB8E0E}"] ){
			quirksMode = 1;//SX
		}
		else {
			quirksMode = 3;	
		}
	}
	else {
		quirksMode = 0;
	}
	
	
	config.setting.quirksMode = quirksMode;
	return quirksMode;	
}

config.setting.getHotkeyCodePath = function(){
	var path = ..io.joinpath(config._cfgDir,".hotkey/hotkey2.aardio"); 
	if(!..io.exist(path)){
		..string.save(path, $"\codes\hotkey.txt")
	}
	
	return path;	
}

config.setting.getFilterWindowsCodePath = function(init){
	var path = ..io.joinpath(config._cfgDir,".filter/filter.aardio"); 
	if(init && !..io.exist(path)){ 
		..string.save(path, $"\codes\filter.aardio")
	}
	
	return path;
}

config.aiChat.enableAutoSave(false);
if(!config.aiChat.itemData) {
	config.aiChat.itemNames={[1]="é»˜è®¤";[2]="è¯å…¸";[3]="ç¿»è¯‘";[4]="ç”»å›¾"};
	config.aiChat.itemData=[
		{
			extraParameters="";
			key='\0\u0001`';
			model="imtip";
			msgLimit=15;
			systemPrompt="";
			temperature=0.4;
			url="https://ai.aardio.com/api/v1/"		
		},
		{
			key="\0\1\96";
			model="imtip";
			msgLimit=15;
			proxy="";
			systemPrompt=/***********
ä½ æ˜¯ä¸€ä½è‹±è¯­æ•™æˆï¼Œä½ çš„ä»»åŠ¡æ˜¯æ ¹æ®è¾“å…¥çš„å•è¯å®Œæˆä¸€ç³»åˆ—è‹±è¯­å­¦ä¹ ç›¸å…³çš„ä»»åŠ¡ã€‚ä»¥ä¸‹æ˜¯è¾“å…¥çš„å•è¯ï¼š
<å•è¯>
{{WORD}}
</å•è¯>

è¯·å®Œæˆä»¥ä¸‹å…·ä½“ä»»åŠ¡ï¼š

### ä»»åŠ¡1ï¼šå•è¯é‡Šä¹‰
- åˆ—å‡ºå•è¯åŒ…å«çš„æ‰€æœ‰è¯æ€§å¯¹åº”çš„**è¯æ€§**ã€æ‰€æœ‰çš„**ä¸­æ–‡é‡Šä¹‰**å’Œ**è‹±æ–‡é‡Šä¹‰**ï¼Œä¸€è¡Œä¸€ä¸ªã€‚
- å¦‚æœå•è¯æ˜¯åŠ¨è¯ï¼Œè¦å±•ç¤º**ç°åœ¨åˆ†è¯**ã€**è¿‡å»å¼**ã€**è¿‡å»åˆ†è¯**ï¼›å¦‚æœæ˜¯åè¯ï¼Œè¦å±•ç¤º**ç¬¬ä¸‰äººç§°å•æ•°**ï¼›å¦‚æœæ˜¯å½¢å®¹è¯ï¼Œè¦å±•ç¤º**æ¯”è¾ƒçº§**å’Œ**æœ€é«˜çº§**ã€‚

### ä»»åŠ¡2: è¦ç‚¹
**ç”¨ä¸­æ–‡è®²è§£æ­¤å•è¯çš„ä¸»è¦ç”¨æ³•ã€ä½¿ç”¨è¦ç‚¹ã€éœ€è¦æ³¨æ„çš„é—®é¢˜ã€‚è¿™æ˜¯æ‰€æœ‰ä»»åŠ¡ä¸­æœ€é‡è¦çš„éƒ¨åˆ†ï¼**

### ä»»åŠ¡3ï¼šä¾‹å¥
æ ¹æ®ä»»åŠ¡2æåŠçš„è¦ç‚¹ï¼Œç”¨è¿™ä¸ªå•è¯é€  3 ä¸ªè‹±æ–‡ä¾‹å¥ï¼ˆå¯¹ä»»åŠ¡2æåŠçš„è¦ç‚¹ã€çŸ­å¥å¯ä»¥åŠ ç²—æ˜¾ç¤ºï¼‰ï¼Œå¹¶é™„ä¸Šä¸­æ–‡ç¿»è¯‘ã€‚

### ä»»åŠ¡4ï¼šè¯æ ¹è¯ç¼€
ç”¨ä¸­æ–‡è®²è¿°è¯¥å•è¯çš„**è¯æ ¹è¯ç¼€èµ·æºæ•…äº‹**ã€‚

### ä»»åŠ¡5ï¼šç›¸è¿‘è¯
ç”¨è¿™ä¸ªå•è¯çš„è¯æ ¹è¯ç¼€ï¼Œæ‹“å±• 5 ä¸ªç›¸è¿‘å•è¯ï¼Œé™„å¸¦**è¯æ€§**å’Œ**ä¸­æ–‡é‡Šä¹‰**ã€‚

### ä»»åŠ¡6ï¼šå°ä½œæ–‡
è¯·æ ¹æ®ä»»åŠ¡2ã€ä»»åŠ¡3ã€ä»»åŠ¡5çš„å†…å®¹ç¼–å†™ä¸€ä¸ªæœ‰è¶£çš„ A2 éš¾åº¦è‹±æ–‡æ•…äº‹ï¼Œé™ 7 è¡Œå†…ã€‚å¹¶é™„ä¸Šä¸­æ–‡ç¿»è¯‘ï¼ˆä¸è¦æ·»åŠ â€œä¸­æ–‡ç¿»è¯‘ï¼šâ€æ ‡é¢˜ï¼‰ã€‚

### ä»»åŠ¡7ï¼šå°æµ‹éªŒ
åŸºäºå‰ 6 ä¸ªä»»åŠ¡ç”Ÿæˆçš„å†…å®¹åˆ›é€  2 ä¸ªå•é€‰é¢˜ï¼ˆä¸è¦æå‰å‹¾é€‰å¹¶æ³„éœ²ç­”æ¡ˆï¼Œä»…å°†ç­”æ¡ˆæ”¾åœ¨æŠ˜å çš„ details æ ‡ç­¾å†…ï¼‰ã€‚

### ä»»åŠ¡8ï¼šè¾“å‡ºéŸ³æ ‡
æ ¼å¼ä¸º `{WORD} [/éŸ³æ ‡/ğŸ”Š](https://dict.youdao.com/dictvoice?audio={WORD}&type=2)`

è¯·æŒ‰ç…§ä»¥ä¸‹ Markdown æ ¼å¼æ’ç‰ˆè¾“å‡ºä½ çš„ç»“æœï¼š

### é‡Šä¹‰

### è¦ç‚¹

### ä¾‹å¥

### è¯æ ¹è¯ç¼€

### ç›¸è¿‘è¯

### å°ä½œæ–‡

### å°æµ‹éªŒ 

1. é—®é¢˜1
- [ ] A. é€‰é¡¹1
- [ ] B. é€‰é¡¹2
- [ ] C. é€‰é¡¹3

2. é—®é¢˜2
- [ ] A. é€‰é¡¹1
- [ ] B. é€‰é¡¹2
- [ ] C. é€‰é¡¹3

<details><summary>æŸ¥çœ‹ç­”æ¡ˆ</summary><blockquote>
1. A. é€‰é¡¹1
2. c. é€‰é¡¹3
</blockquote></details>

{WORD} [/éŸ³æ ‡/ğŸ”Š](https://dict.youdao.com/dictvoice?audio={WORD}&type=2)
***********/;
			temperature=0.3;
			url="https://ai.aardio.com/api/v1/"		
		},
		{
			key="\0\1\96";
			model="imtip";
			msgLimit=15;
			proxy="";
			systemPrompt=/***********
# è§’è‰²

ä½ æ˜¯ä¸€ä½ä¸“ä¸šç¿»è¯‘ã€‚

# ä»»åŠ¡
- å¦‚æœç”¨æˆ·ç¬¬ä¸€æ¬¡è¾“å…¥çš„å†…å®¹ä½¿ç”¨çš„è¯­è¨€æ˜¯ç®€ä½“ä¸­æ–‡ä½ å°±ç¿»è¯‘ä¸ºè‹±æ–‡ï¼Œå¦‚æœä½¿ç”¨çš„æ˜¯å…¶ä»–è¯­è¨€ä½ å°±ç¿»è¯‘æˆç®€ä½“ä¸­æ–‡ã€‚
- å¦‚æœä¸Šæ–‡å·²ç»å­˜åœ¨ç¿»è¯‘ç»“æœï¼Œåˆ™è¯·ç»§ç»­è§£ç­”ç”¨æˆ·å¯¹ç¿»è¯‘ç»“æœçš„ç–‘é—®ã€‚

# å¯¹ç”¨æˆ·ç¬¬ä¸€æ¬¡è¾“å…¥çš„å†…å®¹è¯·åˆ†æˆä»¥ä¸‹æ­¥éª¤è¿›è¡Œç¿»è¯‘ï¼š
1. é¦–å…ˆæ ¹æ®ç”¨æˆ·ç¬¬ä¸€æ¬¡è¾“å…¥çš„å†…å®¹ä½¿ç”¨çš„"""æºè¯­è¨€"""ç¡®å®šç¿»è¯‘çš„"""ç›®æ ‡è¯­è¨€"""ã€‚
å¦‚æœç”¨æˆ·è¾“å…¥ä¸ºç®€ä½“ä¸­æ–‡åˆ™"""ç›®æ ‡è¯­è¨€"""ä¸ºè‹±æ–‡ï¼Œå¦åˆ™"""ç›®æ ‡è¯­è¨€"""ä¸ºä¸­æ–‡ã€‚
2. é¦–å…ˆæ ¹æ®åŸæ–‡ç›´è¯‘ä¸º"""ç›®æ ‡è¯­è¨€"""ï¼Œä¸è¦é—æ¼åŸæ–‡çš„ä»»ä½•ä¿¡æ¯ã€‚
3. å‚è€ƒç¬¬ä¸€æ¬¡ç›´è¯‘çš„ç»“æœï¼Œå°†åŸæ–‡é‡æ–°æ„è¯‘ä¸ºâ€œç›®æ ‡è¯­è¨€â€ï¼Œåœ¨éµå®ˆåŸæ„çš„å‰æä¸‹ï¼Œè®©ç¿»è¯‘åçš„å†…å®¹æ›´åœ°é“ã€æ›´é€šä¿—æ˜“æ‡‚ï¼Œæ›´ç¬¦åˆä»¥ç›®æ ‡è¯­è¨€ä½œä¸ºæ¯è¯­çš„è¡¨è¾¾ä¹ æƒ¯ã€‚
4. ä»¥æ•™å­¦ä¸ºç›®çš„å¯¹ç¿»è¯‘æ—¶æ¶‰åŠçš„é‡ç‚¹è¯­æ³•ä¸æŠ€å·§è¿›è¡Œé€‚å½“çš„è®²è§£ï¼Œå¦‚æœé‡åˆ°ç‰¹æ®Šçš„è¯­è¨€ç°è±¡ã€æ–‡åŒ–èƒŒæ™¯çŸ¥è¯†ä¹Ÿè¯·é€‚å½“è¯´æ˜ã€‚

# å¯¹ç”¨æˆ·ç¬¬ä¸€æ¬¡è¾“å…¥çš„å†…å®¹è¿›è¡Œç¿»è¯‘çš„ç»“æœæŒ‰ä»¥ä¸‹ Markdown æ ¼å¼æ’ç‰ˆè¾“å‡ºï¼ˆåœ¨å…¨éƒ¨ä¸Šä¸‹æ–‡ä¸­è¿™ç§æ ¼å¼åªä½¿ç”¨ä¸€æ¬¡ï¼‰ï¼š

## ç›´è¯‘

## æ„è¯‘

## è®²è§£
***********/;
			temperature=0.5;
			url="https://ai.aardio.com/api/v1/"		
		},
		{
			key="\0\1\96";
			model="imtip";
			msgLimit=15;
			proxy="";
			systemPrompt=/***********
ä½ æ˜¯ç”»å›¾å°åŠ©æ‰‹ã€‚
è¯·æ ¹æ®ç”¨æˆ·æç¤ºä¸ä½ çš„æƒ³åƒç”ŸåŠ¨æè¿°è¦ç”Ÿæˆçš„å›¾ç‰‡ï¼Œå¹¶å°†å›¾ç‰‡æè¿°è½¬æ¢æˆè‹±æ–‡å¡«å……åˆ°ä¸‹é¢ URL çš„å ä½ç¬¦ä¸­ï¼š
![Image](https://image.pollinations.ai/prompt/{prompt}?width=1024&height=1024&nologo=true)

åœ¨ä»¥ä¸Š URL å ä½ç¬¦ä¹‹å¤–çš„æè¿°è¯·ä½¿ç”¨ä¸­æ–‡ã€‚
***********/;
			temperature=0.5;
			url="https://ai.aardio.com/api/v1/"		
		}
	];
	
	..table.assign(config.aiChat,config.aiChat.itemData[1]);
	config.aiChat.selItem=1;
}

/**intellisense(config)
setting = é€šç”¨è®¾ç½®
saveAll() = ä¿å­˜å½“å‰å¯¹è±¡ï¼ˆfsys.config ï¼‰ç®¡ç†çš„æ‰€æœ‰æ–‡ä»¶åŒæ­¥è¡¨ï¼ˆfsys.table å¯¹è±¡ï¼‰åˆ°æ–‡ä»¶ã€‚\nå¦‚æœ fsys.table å¯¹è±¡è°ƒç”¨ enableAutoSave(false) ç¦ç”¨äº†è‡ªåŠ¨ä¿å­˜ï¼Œåˆ™ saveAll è°ƒç”¨å¯¹å…¶æ— æ•ˆã€‚\nç¦ç”¨è‡ªåŠ¨ä¿å­˜çš„ fsys.table å¯¹è±¡å¿…é¡»æ˜¾å¼è°ƒç”¨å…¶ save æ–¹æ³•ä¿å­˜è¡¨æ•°æ®åˆ°æ–‡ä»¶ã€‚
? = å¦‚æœæŒ‡å®šä¸ä»¥ä¸‹åˆ’çº¿å¼€å§‹çš„æˆå‘˜åç§°ï¼ˆåªè¯»ä¸å¯å†™å…¥ï¼‰ï¼Œ\nåˆ™è¿”å›å½“å‰é…ç½®ç›®å½•ä¸‹åŒåçš„æ–‡ä»¶åŒæ­¥è¡¨ï¼ˆfsys.table å¯¹è±¡ï¼‰ã€‚\nè¿™æ˜¯ä¸€ä¸ªå¯è‡ªåŠ¨åºåˆ—åŒ–åˆ°åŒåé…ç½®æ–‡ä»¶çš„è¡¨å¯¹è±¡ã€‚\nä»…åºåˆ—åŒ–ä»¥å­—ç¬¦ä¸²ã€æ•°å€¼ä¸ºé”®çš„å…ƒç´ ï¼Œ\nä»…åºåˆ—åŒ–å€¼ä¸ºå­—ç¬¦ä¸²ã€æ•°å€¼ã€buffer ä»¥åŠå®šä¹‰äº† _serialize å…ƒæ–¹æ³•çš„æˆå‘˜ã€‚\nå¾ªç¯å¼•ç”¨çš„å€¼è½¬æ¢ä¸º nullï¼Œåºåˆ—åŒ–æ—¶å¿½ç•¥æˆå‘˜å‡½æ•°\nå¦‚æœæŒ‡å®šçš„æˆå‘˜åä»¥ä¸‹åˆ’çº¿å¼€å§‹ï¼Œåˆ™æ­£å¸¸è¯»å†™å¯¹åº”çš„å±æ€§å€¼è€Œéæ‰“å¼€æ–‡ä»¶åŒæ­¥è¡¨ã€‚\næ³¨æ„ä¸‹åˆ’çº¿å¼€å§‹çš„å±äºåªè¯»å¸¸é‡ï¼Œè®¾ä¸ºé null å€¼ä»¥åä¸å¯å†ä¿®æ”¹ã€‚\n!fsys_table.
__defaultScheme() = è¿”å›å½“å‰é€‰æ‹©çš„é…ç½®æ–¹æ¡ˆåˆå§‹é»˜è®¤æ–¹æ¡ˆ
end intellisense**/